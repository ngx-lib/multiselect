<div class="options-container" msVirtualScroll [totalCount]="totalCount" (rangeChanged)="updateRange($event)">
  <div #top class="top"></div>
  <div class="group" *ngFor="let groupOption of groupedOptions;trackBy: trackByGroup">
    <div class="option name" [ngClass]="getGroupOptionStyle(groupOption)" (click)="groupOptionClick(groupOption)">
      {{groupOption.name}}
    </div>
    <ng-container *ngTemplateOutlet="optionsTemplate; context: { 
        getOptionStyle: this.getOptionStyle, 
        groupOption: groupOption,
        options: this.groupOption.values, 
        trackByOption: this.trackByOption, 
        select: this.select,
        selectOption: this.selectOption,
        multiple: this.multiple
      }">
    </ng-container>
  </div>
  <div #bottom class="bottom"></div>
</div>
<ng-template #defaultOptionsTemplate let-getOptionStyle="getOptionStyle" let-options="options" let-trackByOption="trackByOption" let-select="select" let-groupOption="groupOption">
  <div class="option" [ngClass]="getOptionStyle(option)" *ngFor="let option of options;trackBy:trackByOption" (click)="select(groupOption, option)">
    {{option.name}}
  </div>
</ng-template>